
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="MyMacroChef is a premium food delivery service 
    with the mission to bring affordable and healthy meals to as many people 
    as possible.">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="../JS/mealPlans.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../CSS/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/css/bootstrap-select.min.css">
	<title>Be-Fit</title>
    <link rel="apple-touch-icon" sizes="180x180" href="..\Favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="..\Favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="..\Favicons/favicon-16x16.png">
    <link rel="manifest" href="..\Favicons/site.webmanifest">
    <link rel="mask-icon" href="..\Favicons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="..\Favicons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="..\Favicons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
<style>
/* Style the body */
body {
      font-family: ;
      margin: 0;
    }
    
    /* Header/Logo Title */
    .header {
      padding: 60px;
      text-align: center;
      background: orange;
      color: white;
      font-size: 30px;
    }
</style>
     
</head>

<body>
   <header class="headerother" style="background-image: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url(../CSS/IMG/foodimage.jpg);height: auto;">
        <nav>
            <div class="">
                <img src="../IMG/logo-new.png" alt="Logo" srcset="" onclick="window.open('livetracking.html', '_self');">
                <img src="../IMG/logo.png" alt="Logo" class="logo-black" srcset="" onclick="window.open('livetracking.html', '_self');">
                <ul id="redirect-bar" class="main-nav js--main-nav" style="float: right;margin-top: 39px;margin-right: 10px;">
                    <li><a href="../HTML/dashboard.html">Home</a></li>
					<li><a href="profile.html">My Profile</a></li>
					<li><a href="mealPlans.html">Meal Plans</a></li>
					<li><a href="recommendation.html">Meal Recommendations</a></li>
                    <!--<li><a href="giftAFriend.html">Gift a Friend</a></li>-->
					<!--<li><a href="liveTracking.html">Live Tracking</a></li>-->
					<li><a href="aboutUs.html">About Us</a></li>
					<li><a href="signout.html">Signout</a></li>
                </ul>
                <a class="mobile-nav-icon js--nav-icon"><i class="ion-navicon-round"></i></a>
            </div>
        </nav>
    </header>
	<div class="header">
    <h1 id="mainheadingMealPlan"></h1>
    <p>We will curate healthy meals for you. Below are our Meals for this plan</p>
    <h6>Want to know more nutritional info about any of these items? Click below</h6>
    <h6><a href="facts.html">Powered by Fatsecret</a></h6>
</div>
    <div class="row" style="padding:20px;" id="mainDiv">
		<div class="card col-md-4" style="background-color: white;border: 5px solid black;">
        <div class="image" style="padding: 10px;">
                <img width="300" id="1" height="300" src="../IMG/carbmeal.jpeg" alt="">
        </div>
        <div class="info" style="">
             <div class="title" style="font-weight: 700;">
                    <h3 style="color: black;font-weight: 800;" class="col-md-offset-3">Low carb meal</h3>
                    <p style="color: black;font-weight: 700;">This meal plan will be more of eggs, nuts and poultry</p>
                </div>
            </div>
            <div class="col-md-offset-4 btn" style="">
                <button class="form-control btn-sm btn1 mealPlanId" id="1" name="1" style="">Select</button>
            </div>
        </div>
		
		<div class="card col-md-4" style="background-color: white;border: 5px solid black;">
        <div class="image" style="padding: 10px;">
                <img width="300" id="1" height="300" src="../IMG/1.jpg" alt="">
        </div>
        <div class="info" style="">
             <div class="title" style="font-weight: 700;">
                    <h3 style="color: black;font-weight: 800;" class="col-md-offset-3">Gluten free meal</h3>
                    <p style="color: black;font-weight: 700;">This meal plan will be more of low-fat dairy,meat fish, poultry</p>
                </div>
            </div>
            <div class="col-md-offset-4 btn" style="">
                <button class="form-control btn-sm btn1 mealPlanId" id="2" name="2" style="">Select</button>
            </div>
        </div>

		<div class="card col-md-4" style="background-color: white;border: 5px solid black;">
        <div class="image" style="padding: 10px;">
                <img width="300" id="1" height="300" src="../IMG/dairyfree.jpeg" alt="">
        </div>
        <div class="info" style="">
             <div class="title" style="font-weight: 700;">
                    <h3 style="color: black;font-weight: 800;" class="col-md-offset-3">Dairy free meal</h3>
                    <p style="color: black;font-weight: 700;">This meal plan will be more of nuts, soy, vegetables, fish</p>
                </div>
            </div>
            <div class="col-md-offset-4 btn" style="">
                <button class="form-control btn-sm btn1 mealPlanId" id="3" name="3" style="">Select</button>
            </div>
        </div>
		
		<div class="card col-md-4" style="background-color: white;border: 5px solid black;">
        <div class="image" style="padding: 10px;">
                <img width="300" id="1" height="300" src="../IMG/3.jpg" alt="">
        </div>
        <div class="info" style="">
             <div class="title" style="font-weight: 700;">
                    <h3 style="color: black;font-weight: 800;" class="col-md-offset-3">Diabetic friendly meal</h3>
                    <p style="color: black;font-weight: 700;">This meal plan will be more of nuts, redmeat, eggs and less of glucose</p>
                </div>
            </div>
            <div class="col-md-offset-4 btn" style="">
                <button class="form-control btn-sm btn1 mealPlanId" id="4" name="4" style="">Select</button>
            </div>
        </div>
		
		
		<div class="card col-md-4" style="background-color: white;border: 5px solid black;">
        <div class="image" style="padding: 10px;">
                <img width="300" id="1" height="300" src="../IMG/4.jpg" alt="">
        </div>
        <div class="info" style="">
             <div class="title" style="font-weight: 700;">
                    <h3 style="color: black;font-weight: 800;" class="col-md-offset-3">Low Salt Meal</h3>
                    <p style="color: black;font-weight: 700;">This meal plan will be more of nuts,poultry, redmeat, fish</p>
                </div>
            </div>
            <div class="col-md-offset-4 btn" style="">
                <button class="form-control btn-sm btn1 mealPlanId" id="5" name="5" style="">Select</button>
            </div>
        </div>
		
		<div class="card col-md-4" style="background-color: white;border: 5px solid black;">
        <div class="image" style="padding: 10px;">
                <img width="300" id="1" height="300" src="../IMG/5.jpg" alt="">
        </div>
        <div class="info" style="">
             <div class="title" style="font-weight: 700;">
                    <h3 style="color: black;font-weight: 800;" class="col-md-offset-3">Low cholesterol meal</h3>
                    <p style="color: black;font-weight: 700;">This meal plan will be less of dairy, redmeat,eggs, shellfish</p>
                </div>
            </div>
            <div class="col-md-offset-4 btn" style="">
                <button class="form-control btn-sm btn1 mealPlanId" id="6" name="6" style="">Select</button>
            </div>
        </div>
		
		<div class="card col-md-4" style="background-color: white;border: 5px solid black;">
        <div class="image" style="padding: 10px;">
                <img width="300" id="1" height="300" src="../IMG/6.jpg" alt="">
        </div>
        <div class="info" style="">
             <div class="title" style="font-weight: 700;">
                    <h3 style="color: black;font-weight: 800;" class="col-md-offset-3">High Protein meal</h3>
                    <p style="color: black;font-weight: 700;">This meal plan will include more eggs,seafood and poultry</p>
                </div>
            </div>
            <div class="col-md-offset-4 btn" style="">
                <button class="form-control btn-sm btn1 mealPlanId" id="7" name="7" style="">Select</button>
            </div>
        </div>
		
		
		<div class="card col-md-4" style="background-color: white;border: 5px solid black;">
        <div class="image" style="padding: 10px;">
                <img width="300" id="1" height="300" src="../IMG/7.jpg" alt="">
        </div>
        <div class="info" style="">
             <div class="title" style="font-weight: 700;">
                    <h3 style="color: black;font-weight: 800;" class="col-md-offset-3">Fiber Rich meal</h3>
                    <p style="color: black;font-weight: 700;">This meal plan will include more grains, nuts and vegetables</p>
                </div>
            </div>
            <div class="col-md-offset-4 btn" style="">
                <button class="form-control btn-sm btn1 mealPlanId" id="8" name="8" style="">Select</button>
            </div>
        </div>
		
		<div class="card col-md-4" style="background-color: white;border: 5px solid black;">
        <div class="image" style="padding: 10px;">
                <img width="300" id="1" height="300" src="../IMG/8.jpg" alt="">
        </div>
        <div class="info" style="">
             <div class="title" style="font-weight: 700;">
                    <h3 style="color: black;font-weight: 800;" class="col-md-offset-3">Low calorie meal</h3>
                    <p style="color: black;font-weight: 700;">This meal plan will include more vegetables, eggs and fruits</p>
                </div>
            </div>
            <div class="col-md-offset-4 btn" style="">
                <button class="form-control btn-sm btn1 mealPlanId" id="9" name="9" style="">Select</button>
            </div>
        </div>
		
		<div class="card col-md-4" style="background-color: white;border: 5px solid black;">
        <div class="image" style="padding: 10px;">
                <img width="300" id="1" height="300" src="../IMG/9.jpg" alt="">
        </div>
        <div class="info" style="">
             <div class="title" style="font-weight: 700;">
                    <h3 style="color: black;font-weight: 800;" class="col-md-offset-3">Low fat meal</h3>
                    <p style="color: black;font-weight: 700;">This meal plan will include higher fibre and lean meats</p>
                </div>
            </div>
            <div class="col-md-offset-4 btn" style="">
                <button class="form-control btn-sm btn1 mealPlanId" id="10" name="10" style="">Select</button>
            </div>
        </div>
		
		<div class="card col-md-4" style="background-color: white;border: 5px solid black;">
        <div class="image" style="padding: 10px;">
                <img width="300" id="1" height="300" src="../IMG/8.jpg" alt="">
        </div>
        <div class="info" style="">
             <div class="title" style="font-weight: 700;">
                    <h3 style="color: black;font-weight: 800;" class="col-md-offset-3">Ovo Vegetarian meal</h3>
                    <p style="color: black;font-weight: 700;">This meal plan will include all animal-based foods except for eggs</p>
                </div>
            </div>
            <div class="col-md-offset-4 btn" style="">
                <button class="form-control btn-sm btn1 mealPlanId" id="11" name="11" style="">Select</button>
            </div>
        </div>
		<div class="card col-md-4" style="background-color: white;border: 5px solid black;">
        <div class="image" style="padding: 10px;">
                <img width="300" id="1" height="300" src="../IMG/8.jpg" alt="">
        </div>
        <div class="info" style="">
             <div class="title" style="font-weight: 700;">
                    <h3 style="color: black;font-weight: 800;" class="col-md-offset-3">Vegan meal</h3>
                    <p style="color: black;font-weight: 700;">This meal plan will be strict vegetarian who no meat, eggs, or dairy products</p>
                </div>
            </div>
            <div class="col-md-offset-4 btn" style="">
                <button class="form-control btn-sm btn1 mealPlanId" id="12" name="12" style="">Select</button>
            </div>
        </div>
		
		<div class="card col-md-4" style="background-color: white;border: 5px solid black;">
        <div class="image" style="padding: 10px;">
                <img width="300" id="1" height="300" src="../IMG/8.jpg" alt="">
        </div>
        <div class="info" style="">
             <div class="title" style="font-weight: 700;">
                    <h3 style="color: black;font-weight: 800;" class="col-md-offset-3">Ovo-Lac-Vegan meal</h3>
                    <p style="color: black;font-weight: 700;">This meal plan will include all animal-based foods except for eggs, lactose(milk)</p>
                </div>
            </div>
            <div class="col-md-offset-4 btn" style="">
                <button class="form-control btn-sm btn1 mealPlanId" id="13" name="13" style="">Select</button>
            </div>
        </div>
		
		<div class="card col-md-4" style="background-color: white;border: 5px solid black;">
        <div class="image" style="padding: 10px;">
                <img width="300" id="1" height="300" src="../IMG/8.jpg" alt="">
        </div>
        <div class="info" style="">
             <div class="title" style="font-weight: 700;">
                    <h3 style="color: black;font-weight: 800;" class="col-md-offset-3">Pescetarian meal</h3>
                    <p style="color: black;font-weight: 700;">This meal plan will include all fish, seafood,no meat only fish</p>
                </div>
            </div>
            <div class="col-md-offset-4 btn" style="">
                <button class="form-control btn-sm btn1 mealPlanId" id="14" name="14" style="">Select</button>
            </div>
        </div>
    </div>

<script>   
function csvToArray(str, delimiter = ",") {
  // slice from start of text to the first \n index
  // use split to create an array from string by delimiter
  const headers = str.slice(0, str.indexOf("\n")).split(delimiter);

  // slice from \n index + 1 to the end of the text
  // use split to create an array of each csv value row
  const rows = str.slice(str.indexOf("\n") + 1).split("\n");
  return rows;
}

//Example, including customisable intervals [lower_bound, upper_bound)
function randomGenerate(upperbound){
	var limit = 24,
    amount = 3,
    lower_bound = 1,
    upper_bound = upperbound,
    unique_random_numbers = [];

	if (amount > limit) limit = amount; //Infinite loop if you want more unique
										//Natural numbers than exist in a
										// given range
	while (unique_random_numbers.length < limit) {
		var random_number = Math.floor(Math.random()*(upper_bound - lower_bound) + lower_bound);
		if (unique_random_numbers.indexOf(random_number) == -1) { 
			// Yay! new random number
			unique_random_numbers.push( random_number );
		}
	}
	return unique_random_numbers;
}

	window.onload = function () {
	 	var url2 = document.location.href,
	 		params = url2.split('?')[1].split('&'),
	 		data = {}, tmp;
	 	for (var i = 0, l = params.length; i < l; i++) {
	 		 tmp = params[i].split('=');
	 		 data[tmp[0]] = tmp[1];
	 	}
	 	//$('#mealId').val(data.mealid)
		mealId=data.mealid;
		//const url = 'https://mealsview.s3.amazonaws.com/dairy_free.csv';
		url = 'https://mealdeliveryapp.s3.amazonaws.com/Resources/Data/dairy_free.csv';
		//mealId = $('#mealId').val()
		  if(mealId=="1"){
			$('#mainheadingMealPlan').append("Low carb meal")
			url = 'https://mealdeliveryapp.s3.amazonaws.com/Resources/Data/low_carb.csv';
		  }else if(mealId=="2"){
		  $('#mainheadingMealPlan').append("Gluten free meal")
			url = 'https://mealdeliveryapp.s3.amazonaws.com/Resources/Data/gluten_free.csv';
		  }else if(mealId=="3"){
		  $('#mainheadingMealPlan').append("Dairy free meal")
			url = 'https://mealdeliveryapp.s3.amazonaws.com/Resources/Data/dairy_free.csv';
		  }else if(mealId=="4"){
		  $('#mainheadingMealPlan').append("Diabetic friendly meal")
		  url = 'https://mealdeliveryapp.s3.amazonaws.com/Resources/Data/diabetic_friendly.csv';
		  }else if(mealId=="5"){
		  $('#mainheadingMealPlan').append("Low Salt Meal")
		  url = 'https://mealdeliveryapp.s3.amazonaws.com/Resources/Data/low_sodium.csv';
		  }else if(mealId=="6"){
		  $('#mainheadingMealPlan').append("Low cholesterol meal")
		  url = 'https://mealdeliveryapp.s3.amazonaws.com/Resources/Data/low_cholesterol.csv';
		  }else if(mealId=="7"){
		  $('#mainheadingMealPlan').append("High Protein meal")
		  url = 'https://mealdeliveryapp.s3.amazonaws.com/Resources/Data/protein_rich.csv';
		  }else if(mealId=="8"){
		  $('#mainheadingMealPlan').append("Fiber Rich meal")
		  url = 'https://mealdeliveryapp.s3.amazonaws.com/Resources/Data/high_fiber.csv';
		  }else if(mealId=="9"){
		  $('#mainheadingMealPlan').append("OUR MEALS")
		  url = '';//no file
		  }else if(mealId=="10"){
		  $('#mainheadingMealPlan').append("Low fat meal")
		  url = 'https://mealdeliveryapp.s3.amazonaws.com/Resources/Data/low_fat.csv';
		  }else if(mealId==11){
		  $('#mainheadingMealPlan').append("Ovo Vegetarian meal")
		  url = 'https://mealdeliveryapp.s3.amazonaws.com/Resources/Data/ovo_vegan.csv';
		  }else if(mealId==12){
		  $('#mainheadingMealPlan').append("Vegan meal")
		  url = 'https://mealdeliveryapp.s3.amazonaws.com/Resources/Data/vegan.csv';
		  }else if(mealId==13){
		  $('#mainheadingMealPlan').append("Ovo-Lac-Vegan meal")
		  url = 'https://mealdeliveryapp.s3.amazonaws.com/Resources/Data/ovo_lac_vegan.csv';
		  }else if(mealId==14){
		  $('#mainheadingMealPlan').append("Pescetarian meal")
		  url = 'https://mealdeliveryapp.s3.amazonaws.com/Resources/Data/Pescetarian.csv';
		  }
	if(url!=''){
		const response = fetch("https://i4ct2jnqkk.execute-api.us-east-1.amazonaws.com/Prod/mealsearch?meal_id=" + mealId, {
			method: "GET",
			headers: { "Content-Type": "application/json" }
		}).then(  
			
		function(response) {
		console.log("in fetch url");			
		  if (response.status !== 200) {  
				console.warn('Looks like there was a problem. Status Code: ' + 
				response.status);  
				return;  
		  }
		  console.log(response.body);
		  
		  // Examine the text in the response  
		  response.text().then(function(data) {  
		  result=JSON.parse(data);
		  let csvdata=JSON.parse(result["body"]);
		  
		  $('#mainDiv').empty();
		  datalength = csvdata.length;
		  //listRandom = randomGenerate(csvdata.length);
			for (let i = 0; i < datalength; i++) {
				//aftersplit = csvdata[listRandom[i]].split('\"');
				$('#mainDiv').append('<div class="card col-md-3" style="background-color: white;border: 5px solid black"><div class="image" style="padding: 10px;"><img width="100" id="1" height="100" src="../IMG/food.png" alt=""></div><div class="info" style="height: 120px;"><div class="" style="font-weight: 700;"><p style="color: black;font-weight: 600;">'+csvdata[i]["_source"]["name"]+'</p><p style="color: black;font-weight: 500;">Total calories : '+csvdata[i]["_source"]["calories"]+'</p></div></div></div>');
			}
			
		  }); 
		}).catch(function(err) {  
			console.error('Fetch Error -', err);  
		});
	
	
		/*fetch(url)  
	  .then(  
		function(response) {
		   console.log("in fetch url");			
		  if (response.status !== 200) {  
				console.warn('Looks like there was a problem. Status Code: ' + 
				response.status);  
				return;  
		  }
		  console.log(response.body);
		  
		  // Examine the text in the response  
		  response.text().then(function(data) {  
		  let csvdata=data
		  ok = csvToArray(csvdata);
		  $('#mainDiv').empty();
		  listRandom = randomGenerate(ok.length);
			for (let i = 0; i < listRandom.length; i++) {
				aftersplit = ok[listRandom[i]].split('\"');
				$('#mainDiv').append('<div class="card col-md-3" style="background-color: white;border: 5px solid black"><div class="image" style="padding: 10px;"><img width="100" id="1" height="100" src="../IMG/food.png" alt=""></div><div class="info" style="height: 120px;"><div class="" style="font-weight: 700;"><p style="color: black;font-weight: 600;">'+aftersplit[1]+'</p><p style="color: black;font-weight: 500;">Total calories : '+aftersplit[2].substring(1)+'</p></div></div></div>');
			}
			
		  }); 
		}  
	  )  
	  .catch(function(err) {  
		console.error('Fetch Error -', err);  
	  });*/
	}

	 } 
	
	
</script>
</body>
</html>
